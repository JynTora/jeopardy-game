<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <title>Lokal spielen ‚Äì Jeopardy Teams</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="manifest" href="/manifest.json" />
    <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('/sw.js');}</script>
    <link rel="stylesheet" href="/style.css" />
    <script src="/socket.io/socket.io.js"></script>
    <script src="/player-teams.js" defer></script>
    <style>
      .player-page {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .player-card {
        width: min(400px, 100%);
        background: radial-gradient(circle at top, #451a03, #1c1917 60%, #0c0a09 100%);
        border-radius: 24px;
        padding: 28px 24px 32px;
        box-shadow: 0 30px 80px rgba(0,0,0,0.85), 0 0 30px rgba(245,158,11,0.15);
        border: 1px solid rgba(245,158,11,0.35);
        text-align: center;
      }

      .teams-badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 999px;
        font-size: 0.6rem;
        font-weight: 700;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: #fff;
        margin-bottom: 12px;
      }

      .player-title {
        font-size: 1.5rem;
        font-weight: 800;
        color: #fef3c7;
        margin: 0 0 20px;
      }

      .form-group {
        margin-bottom: 16px;
        text-align: left;
      }

      .form-label {
        display: block;
        font-size: 0.8rem;
        color: #a8a29e;
        margin-bottom: 6px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .form-input {
        width: 100%;
        padding: 14px 16px;
        border-radius: 12px;
        border: 2px solid rgba(148, 163, 184, 0.3);
        background: rgba(15, 23, 42, 0.8);
        color: #f8fafc;
        font-size: 1rem;
      }

      .form-input:focus {
        outline: none;
        border-color: #f59e0b;
      }

      /* Team Selection */
      .team-selection {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-bottom: 20px;
      }

      .team-option {
        padding: 12px;
        border-radius: 10px;
        border: 2px solid transparent;
        background: rgba(30, 41, 59, 0.8);
        cursor: pointer;
        transition: all 0.15s ease;
        text-align: center;
      }

      .team-option:hover {
        transform: translateY(-2px);
      }

      .team-option.selected {
        box-shadow: 0 0 15px currentColor;
      }

      .team-option.team-red { border-color: rgba(239, 68, 68, 0.5); color: #f87171; }
      .team-option.team-blue { border-color: rgba(59, 130, 246, 0.5); color: #60a5fa; }
      .team-option.team-green { border-color: rgba(34, 197, 94, 0.5); color: #4ade80; }
      .team-option.team-purple { border-color: rgba(168, 85, 247, 0.5); color: #c084fc; }
      .team-option.team-orange { border-color: rgba(249, 115, 22, 0.5); color: #fb923c; }
      .team-option.team-pink { border-color: rgba(236, 72, 153, 0.5); color: #f472b6; }

      .team-option.selected.team-red { border-color: #ef4444; background: rgba(239, 68, 68, 0.2); }
      .team-option.selected.team-blue { border-color: #3b82f6; background: rgba(59, 130, 246, 0.2); }
      .team-option.selected.team-green { border-color: #22c55e; background: rgba(34, 197, 94, 0.2); }
      .team-option.selected.team-purple { border-color: #a855f7; background: rgba(168, 85, 247, 0.2); }
      .team-option.selected.team-orange { border-color: #f97316; background: rgba(249, 115, 22, 0.2); }
      .team-option.selected.team-pink { border-color: #ec4899; background: rgba(236, 72, 153, 0.2); }

      .team-option-name {
        font-weight: 700;
        font-size: 0.9rem;
      }

      .team-option-count {
        font-size: 0.7rem;
        opacity: 0.7;
        margin-top: 4px;
      }

      .no-teams-msg {
        color: #64748b;
        font-style: italic;
        padding: 20px;
        grid-column: 1 / -1;
      }

      .join-btn {
        width: 100%;
        padding: 16px;
        border-radius: 14px;
        border: none;
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: #fff;
        font-size: 1.1rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.15s ease;
        margin-bottom: 16px;
      }

      .join-btn:hover:not(:disabled) {
        box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
        transform: translateY(-2px);
      }

      .join-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .error-msg {
        color: #f87171;
        font-size: 0.85rem;
        min-height: 20px;
        margin-bottom: 10px;
      }

      /* Buzzer View */
      .buzzer-view {
        display: none;
      }

      .buzzer-view.active {
        display: block;
      }

      .join-view.hidden {
        display: none;
      }

      .player-info {
        margin-bottom: 20px;
      }

      .player-name-display {
        font-size: 1.3rem;
        font-weight: 700;
        color: #fef3c7;
      }

      .player-team-display {
        font-size: 0.9rem;
        color: #a8a29e;
        margin-top: 4px;
      }

      .buzzer-btn {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        border: 6px solid rgba(239, 68, 68, 0.6);
        background: linear-gradient(145deg, #dc2626, #b91c1c);
        color: #fef2f2;
        font-size: 1.5rem;
        font-weight: 800;
        text-transform: uppercase;
        cursor: pointer;
        transition: all 0.15s ease;
        box-shadow: 0 10px 40px rgba(239, 68, 68, 0.4), inset 0 -8px 20px rgba(0, 0, 0, 0.3);
        margin: 20px auto;
        display: block;
      }

      .buzzer-btn:active:not(:disabled) {
        transform: scale(0.95);
        box-shadow: 0 5px 20px rgba(239, 68, 68, 0.3), inset 0 -4px 10px rgba(0, 0, 0, 0.3);
      }

      .buzzer-btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        filter: grayscale(0.5);
      }

      .buzzer-btn.free {
        border-color: rgba(34, 197, 94, 0.6);
        background: linear-gradient(145deg, #22c55e, #16a34a);
        box-shadow: 0 10px 40px rgba(34, 197, 94, 0.4), inset 0 -8px 20px rgba(0, 0, 0, 0.3);
        animation: pulse-green 1.5s infinite;
      }

      @keyframes pulse-green {
        0%, 100% { box-shadow: 0 10px 40px rgba(34, 197, 94, 0.4), inset 0 -8px 20px rgba(0, 0, 0, 0.3); }
        50% { box-shadow: 0 10px 60px rgba(34, 197, 94, 0.6), inset 0 -8px 20px rgba(0, 0, 0, 0.3); }
      }

      .buzzer-status {
        font-size: 0.9rem;
        color: #94a3b8;
        margin-top: 16px;
      }

      .back-link {
        display: inline-block;
        margin-top: 16px;
        color: #78716c;
        font-size: 0.85rem;
        text-decoration: none;
      }

      .back-link:hover {
        color: #d6d3d1;
      }
    </style>
  </head>
  <body class="jt-body">
    <div class="player-page">
      <div class="player-card">
        <span class="teams-badge">üë• TEAMS LOKAL</span>

        <!-- Join View -->
        <div id="joinView" class="join-view">
          <h1 class="player-title">Mitspielen</h1>

          <div class="form-group">
            <label class="form-label">Dein Name</label>
            <input type="text" id="playerName" class="form-input" placeholder="Name eingeben..." maxlength="20" />
          </div>

          <div class="form-group">
            <label class="form-label">Team w√§hlen</label>
            <div id="teamSelection" class="team-selection">
              <div class="no-teams-msg">Keine Teams verf√ºgbar</div>
            </div>
          </div>

          <div id="errorMsg" class="error-msg"></div>

          <button id="joinBtn" class="join-btn" disabled>Beitreten</button>

          <a href="/jeopardy-teams.html" class="back-link">‚Üê Zur√ºck</a>
        </div>

        <!-- Buzzer View -->
        <div id="buzzerView" class="buzzer-view">
          <div class="player-info">
            <div id="playerNameDisplay" class="player-name-display">‚Äî</div>
            <div id="playerTeamDisplay" class="player-team-display">‚Äî</div>
          </div>

          <button id="buzzerBtn" class="buzzer-btn" disabled>BUZZ!</button>

          <div id="buzzerStatus" class="buzzer-status">Warte auf Freigabe...</div>
        </div>
      </div>
    </div>

    <script>
      function toggleFullscreen() {
        if (!document.fullscreenElement) document.documentElement.requestFullscreen();
        else if (document.exitFullscreen) document.exitFullscreen();
      }
    </script>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">‚õ∂</button>
  </body>
</html>
